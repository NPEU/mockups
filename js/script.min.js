var cookie_name="fallback_accept_cookies",cookie_expire_days=60,cookie_notice_id="cookie_notice",cookie_button_id="accept_cookies",cookie_notice_class="cookie_notice",cookie_button_class="",cookie_close_class="cookie_notice--close",cookie_notice_effect_duration=1e3,cookie_html='<div id="'+cookie_notice_id+'" class="'+cookie_notice_class+'">\n<p class="cookie_notice__message">This site uses <a href="http://www.allaboutcookies.org/" rel="external noopener noreferrer" target="_blank">cookies</a> to improve user experience. By using this site you agree to our use of cookies.</p>\n<span class="cookie_notice__action"><button id="'+cookie_button_id+'" class="'+cookie_button_class+'">Dismiss</button></span>\n</div>';!function(){var e,t=function(){var e=document.querySelectorAll(".js-adjust-me");Array.prototype.forEach.call(e,function(e,t){var n=e.querySelector(".js-adjust-me__reference");getComputedStyle(e).height>getComputedStyle(n).height?e.style.justifyContent="center":e.style.justifyContent="space-between"})};e=t,(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?e():document.addEventListener("DOMContentLoaded",e),window.onresize=t}(),function(){if("objectFit"in document.documentElement.style==!1&&-1<navigator.userAgent.indexOf("UCBrowser")){var e,t=function(){var e=document.querySelectorAll(".js-image-cover");Array.prototype.forEach.call(e,function(e,t){var n=e.querySelector("img"),r=e.getBoundingClientRect(),o=n.getBoundingClientRect();console.log(r.height,o.height,n.height<r.height),n.removeAttribute("style"),n.height<=r.height&&(n.style.width="auto",n.style.height="100%")})};e=function(){t();var e=function(r,o,i){var a;return function(){var e=this,t=arguments,n=i&&!a;clearTimeout(a),a=setTimeout(function(){a=null,i||r.apply(e,t)},o),n&&r.apply(e,t)}}(function(){t()},250);window.addEventListener("resize",e)},(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?e():document.addEventListener("DOMContentLoaded",e)}}(),function(){var e,t=function(e,t,n){if(n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3);var o="; expires="+r.toGMTString()}else o="";document.cookie=e+"="+t+o+"; path=/"};e=function(){(function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return null})(cookie_name)||(document.getElementsByTagName("body")[0].insertAdjacentHTML("afterbegin",cookie_html),document.getElementById(cookie_button_id).onclick=function(){t(cookie_name,"true",cookie_expire_days),document.getElementById(cookie_notice_id).className+="  "+cookie_close_class,setTimeout(function(){var e=document.getElementById(cookie_notice_id);e.parentNode.removeChild(e)},cookie_notice_effect_duration)})},(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?e():document.addEventListener("DOMContentLoaded",e)}(),function(){var e,t="js-nav-bar",n=function(){if(r){var e=document.querySelectorAll('[data-js="nav-bar__button"]');Array.prototype.forEach.call(e,function(e,t){var r=e.getAttribute("id");e.setAttribute("aria-expanded","false"),e.addEventListener("click",function(){var e="true"===this.getAttribute("aria-expanded")||!1,t=document.querySelectorAll('[data-js="nav-bar__button"][aria-expanded="true"]');if(Array.prototype.forEach.call(t,function(e,t){e.setAttribute("aria-expanded","false")}),this.setAttribute("aria-expanded",!e),!e){var n=document.querySelector("#"+r+'--target [data-js="nav-bar__focus-start"]');n&&n.focus()}})})}},r=function(e){var t,n=!1;if(void 0!==document.styleSheets){var r=document.styleSheets;document.location.origin||(document.location.origin=document.location.protocol+"//"+document.location.hostname+(document.location.port?":"+document.location.port:""));var o=RegExp("^"+document.location.origin);e:for(var i=0;i<r.length;i++){var a=r[i];if(null===a.href||null!==o.exec(a.href)){t=void 0!==a.cssRules?a.cssRules:a.rules;for(var c=0;c<t.length;c++)if(t[c].selectorText==e){n=!0;break e}}}}return n}("."+t);if(r){var o=document.querySelector("html");o.classList?o.classList.add(t):o.className+=" "+t}e=n,(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?e():document.addEventListener("DOMContentLoaded",e)}(),function(){var e,s="js-over-panel",l="js-over-panel-control",u="js-over-panel_is-open",d="js-over-panel_is-animating",t=function(){if(n){var e=document.querySelectorAll('[data-js="over-panel"]'),c=function(){var e,t=document.createElement("fakeelement"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(void 0!==t.style[e])return n[e]}();Array.prototype.forEach.call(e,function(n,e){var t=n.getAttribute("id"),r=document.querySelector('[aria-controls="'+t+'"]'),o=n.querySelector('[data-js="over-panel__overlay"]');if(r){n.classList?n.classList.add(s):n.className+=" "+s,r.classList?r.classList.add(l):r.className+=" "+l,r.addEventListener("click",function(){n.classList?n.classList.add(d):n.className+=" "+d;var e="true"===this.getAttribute("aria-expanded")||!1,t=document.querySelectorAll('[data-js="overpanel__control"][aria-expanded="true"]');Array.prototype.forEach.call(t,function(e,t){e.click()}),this.setAttribute("aria-expanded",!e),e?n.classList?n.classList.remove(u):n.className=n.className.replace(new RegExp("(^|\\b)"+u.split(" ").join("|")+"(\\b|$)","gi")," "):n.classList?n.classList.add(u):n.className+=" "+u}),o.addEventListener("click",function(){r.click()}),c&&n.addEventListener(c,function(){n.classList?n.classList.remove(d):(console.log("Animation ended"),n.className=n.className.replace(new RegExp("(^|\\b)"+d.split(" ").join("|")+"(\\b|$)","gi")," "))});var i=n.querySelector('[data-js="over-panel__contents"]').querySelectorAll("a, button, input, select, textarea");if(0<i.length){i[0];var a=i[i.length-1];a.addEventListener("keydown",function(e){"true"!=r.getAttribute("aria-expanded")||9!==e.keyCode||e.shiftKey||(e.preventDefault(),r.focus())}),r.addEventListener("keydown",function(e){"true"==r.getAttribute("aria-expanded")&&9===e.keyCode&&e.shiftKey&&(e.preventDefault(),a.focus())})}}})}},n=function(e){var t,n=!1;if(void 0!==document.styleSheets){var r=document.styleSheets;document.location.origin||(document.location.origin=document.location.protocol+"//"+document.location.hostname+(document.location.port?":"+document.location.port:""));var o=RegExp("^"+document.location.origin);e:for(var i=0;i<r.length;i++){var a=r[i];if(null===a.href||null!==o.exec(a.href)){t=void 0!==a.cssRules?a.cssRules:a.rules;for(var c=0;c<t.length;c++)if(t[c].selectorText==e){n=!0;break e}}}}return n}("."+s);if(n){var r=document.querySelector("html");r.classList?r.classList.add(s):r.className+=" "+s}e=t,(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?e():document.addEventListener("DOMContentLoaded",e)}(),function(){var e,n="js-dropdown",t=function(){var e=document.querySelectorAll(".dropdown");if(r){Array.prototype.forEach.call(e,function(e,t){e.classList?e.classList.add(n):e.className+=" "+n});var t=document.querySelectorAll('[data-js="dropdown__button"]');Array.prototype.forEach.call(t,function(e,t){var r=e.getAttribute("id");e.setAttribute("aria-expanded","false"),e.addEventListener("click",function(){var e="true"===this.getAttribute("aria-expanded")||!1,t=document.querySelectorAll('[data-js="dropdown__button"][aria-expanded="true"]');if(Array.prototype.forEach.call(t,function(e,t){e.setAttribute("aria-expanded","false")}),this.setAttribute("aria-expanded",!e),!e){var n=document.querySelector("#"+r+'--target [data-js="dropdown__focus-start"]');n&&n.focus()}})})}},r=function(e){var t,n=!1;if(void 0!==document.styleSheets){var r=document.styleSheets;document.location.origin||(document.location.origin=document.location.protocol+"//"+document.location.hostname+(document.location.port?":"+document.location.port:""));var o=RegExp("^"+document.location.origin);e:for(var i=0;i<r.length;i++){var a=r[i];if(null===a.href||null!==o.exec(a.href)){t=void 0!==a.cssRules?a.cssRules:a.rules;for(var c=0;c<t.length;c++)if(t[c].selectorText==e){n=!0;break e}}}}return n}("."+n);if(r){var o=document.querySelector("html");o.classList?o.classList.add(n):o.className+=" "+n}e=t,(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?e():document.addEventListener("DOMContentLoaded",e)}(),function(){var e,l={markjs_error_raised:!1,filterable_index_names:[],init:function(){var e=document.querySelectorAll("[filterable_group]");Array.prototype.forEach.call(e,function(o,e){var t=o.querySelector("[filterable_form_template]");t&&(filterable_form=t.innerHTML,t.insertAdjacentHTML("afterend",filterable_form)),l.generateIndex(o);var n=o.querySelector("[filterable_empty_list_template]");if(n)filterable_empty_list=n.innerHTML;else{var r=document.createElement("p");r.textContent="No matches found.",r.setAttribute("filterable_empty_list_message",""),r.setAttribute("hidden",""),filterable_empty_list=r.outerHTML}var i=o.querySelectorAll("[filterable_list]");Array.prototype.forEach.call(i,function(e,t){e.insertAdjacentHTML("afterend",filterable_empty_list)});var a=o.querySelector("[filterable_input]");a.addEventListener("keyup",function(){l.filterList(o,this.value)});var c=o.querySelector("[filterable_item]").querySelectorAll("[filterable_index_name]");l.filterable_index_names=Array.prototype.map.call(c,function(e){return e.getAttribute("filterable_index_name")});var s=o.querySelectorAll("[filterable_toggle]");Array.prototype.forEach.call(s,function(e,t){var n=e.tagName.toLowerCase(),r=e.type;r&&(r=r.toLowerCase()),("select"==n||"input"==n&&-1<["checkbox","radio"].indexOf(r))&&(-1<l.filterable_index_names.indexOf(e.getAttribute("filterable_toggle"))||""==e.getAttribute("filterable_toggle"))&&e.addEventListener("change",function(){l.toggle_index(o,this.getAttribute("filterable_toggle")),l.generateIndex(o),l.filterList(o,a.value)})})})},generateIndex:function(e){var t=e.querySelectorAll("[filterable_item]");Array.prototype.forEach.call(t,function(e,t){if(""===e.getAttribute("filterable_index"))var n=e.textContent;else{var r=e.querySelectorAll("[filterable_index]");n="";Array.prototype.forEach.call(r,function(e,t){n+=e.textContent+" "})}e.setAttribute("filterable_index_string",n.toLowerCase().trim())})},filterList:function(n,r){r=r.toLowerCase().trim();var e=n.querySelectorAll("[filterable_item]");Array.prototype.forEach.call(e,function(e,t){-1<e.getAttribute("filterable_index_string").indexOf(r)?(e.removeAttribute("hidden"),""===n.getAttribute("filterable_mark_results")&&l.highlight_results(e,r)):e.setAttribute("hidden","")});var t=n.querySelectorAll("[filterable_list]");Array.prototype.forEach.call(t,function(e,t){var n=!e.querySelectorAll("[filterable_item]:not([hidden])").length,r=e.nextElementSibling;n?(e.setAttribute("hidden",""),r.removeAttribute("hidden")):(e.removeAttribute("hidden"),r.setAttribute("hidden",""))})},toggle_index:function(e,n){var t=e.querySelectorAll("[filterable_index_name]");Array.prototype.forEach.call(t,function(e,t){e.getAttribute("filterable_index_name")==n||""==n?e.setAttribute("filterable_index",""):e.removeAttribute("filterable_index")})},highlight_results:function(e,t){if(window.Mark){var n=new Mark(e.querySelectorAll("[filterable_index], [filterable_index_name]"));n.unmark({done:function(){n.mark(t)}})}else l.markjs_error_raised||(console.error("Mark.js isn't loaded - could not highlight query results."),l.markjs_error_raised=!0)}};e=l.init,(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?e():document.addEventListener("DOMContentLoaded",e)}(),function(){"use strict";var e,c,a,t,n=document.createElement("details"),r="undefined"!=typeof HTMLDetailsElement&&n instanceof HTMLDetailsElement,o="open"in n||r,i="ontoggle"in n,s=[],l=s.forEach,u=s.slice;function d(e){(function(e,t){return(e.tagName==t?[e]:[]).concat("function"==typeof e.getElementsByTagName?u.call(e.getElementsByTagName(t)):[])})(e,"SUMMARY").forEach(function(e){var t=m(e,"DETAILS");e.setAttribute("aria-expanded",t.hasAttribute("open")),e.hasAttribute("tabindex")||e.setAttribute("tabindex","0"),e.hasAttribute("role")||e.setAttribute("role","button")})}function f(e){return!(e.defaultPrevented||e.ctrlKey||e.metaKey||e.shiftKey||e.target.isContentEditable)}function h(n){addEventListener("click",function(e){if(f(e)&&e.which<=1){var t=m(e.target,"SUMMARY");t&&t.parentNode&&"DETAILS"==t.parentNode.tagName&&n(t.parentNode)}},!1),addEventListener("keydown",function(e){if(f(e)&&(13==e.keyCode||32==e.keyCode)){var t=m(e.target,"SUMMARY");t&&t.parentNode&&"DETAILS"==t.parentNode.tagName&&(n(t.parentNode),e.preventDefault())}},!1)}function p(e){var t=document.createEvent("Event");t.initEvent("toggle",!1,!1),e.dispatchEvent(t)}function m(e,t){if("function"==typeof e.closest)return e.closest(t);for(;e;){if(e.tagName==t)return e;e=e.parentNode}}o||(document.head.insertAdjacentHTML("afterbegin",'<style>\ndetails, summary {\n  display: block;\n}\ndetails:not([open]) > *:not(summary) {\n  display: none;\n}\nsummary::before {\n  content: "►";\n  padding-right: 0.3rem;\n  font-size: 0.6rem;\n  cursor: default;\n}\n[open] > summary::before {\n  content: "▼";\n}\n</style>'),e=document.createElement("details").constructor.prototype,c=e.setAttribute,a=e.removeAttribute,t=Object.getOwnPropertyDescriptor(e,"open"),Object.defineProperties(e,{open:{get:function(){return"DETAILS"==this.tagName?this.hasAttribute("open"):t&&t.get?t.get.call(this):void 0},set:function(e){return"DETAILS"==this.tagName?e?this.setAttribute("open",""):this.removeAttribute("open"):t&&t.set?t.set.call(this,e):void 0}},setAttribute:{value:function(e,t){var n=this,r=function(){return c.call(n,e,t)};if("open"!=e||"DETAILS"!=this.tagName)return r();var o=this.hasAttribute("open"),i=r();if(!o){var a=this.querySelector("summary");a&&a.setAttribute("aria-expanded",!0),p(this)}return i}},removeAttribute:{value:function(e){var t=this,n=function(){return a.call(t,e)};if("open"!=e||"DETAILS"!=this.tagName)return n();var r=this.hasAttribute("open"),o=n();if(r){var i=this.querySelector("summary");i&&i.setAttribute("aria-expanded",!1),p(this)}return o}}}),h(function(e){e.hasAttribute("open")?e.removeAttribute("open"):e.setAttribute("open","")}),d(document),window.MutationObserver?new MutationObserver(function(e){l.call(e,function(e){l.call(e.addedNodes,d)})}).observe(document.documentElement,{subtree:!0,childList:!0}):document.addEventListener("DOMNodeInserted",function(e){d(e.target)})),o&&!i&&(window.MutationObserver?new MutationObserver(function(e){l.call(e,function(e){var t=e.target,n=e.attributeName;"DETAILS"==t.tagName&&"open"==n&&p(t)})}).observe(document.documentElement,{attributes:!0,subtree:!0}):h(function(t){var n=t.getAttribute("open");setTimeout(function(){var e=t.getAttribute("open");n!=e&&p(t)},1)}))}(),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Mark=t()}(this,function(){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function l(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:5e3;o(this,l),this.ctx=e,this.iframes=t,this.exclude=n,this.iframesTimeout=r}return e(l,[{key:"getContexts",value:function(){var n=[];return(void 0!==this.ctx&&this.ctx?NodeList.prototype.isPrototypeOf(this.ctx)?Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?this.ctx:"string"==typeof this.ctx?Array.prototype.slice.call(document.querySelectorAll(this.ctx)):[this.ctx]:[]).forEach(function(t){var e=0<n.filter(function(e){return e.contains(t)}).length;-1!==n.indexOf(t)||e||n.push(t)}),n}},{key:"getIframeContents",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},r=void 0;try{var o=e.contentWindow;if(r=o.document,!o||!r)throw new Error("iframe inaccessible")}catch(e){n()}r&&t(r)}},{key:"isIframeBlank",value:function(e){var t="about:blank",n=e.getAttribute("src").trim();return e.contentWindow.location.href===t&&n!==t&&n}},{key:"observeIframeLoad",value:function(t,n,r){var o=this,i=!1,a=null,e=function e(){if(!i){i=!0,clearTimeout(a);try{o.isIframeBlank(t)||(t.removeEventListener("load",e),o.getIframeContents(t,n,r))}catch(e){r()}}};t.addEventListener("load",e),a=setTimeout(e,this.iframesTimeout)}},{key:"onIframeReady",value:function(e,t,n){try{"complete"===e.contentWindow.document.readyState?this.isIframeBlank(e)?this.observeIframeLoad(e,t,n):this.getIframeContents(e,t,n):this.observeIframeLoad(e,t,n)}catch(e){n()}}},{key:"waitForIframes",value:function(e,t){var n=this,r=0;this.forEachIframe(e,function(){return!0},function(e){r++,n.waitForIframes(e.querySelector("html"),function(){--r||t()})},function(e){e||t()})}},{key:"forEachIframe",value:function(e,n,r){var o=this,t=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){},i=e.querySelectorAll("iframe"),a=i.length,c=0;i=Array.prototype.slice.call(i);var s=function(){--a<=0&&t(c)};a||s(),i.forEach(function(t){l.matches(t,o.exclude)?s():o.onIframeReady(t,function(e){n(t)&&(c++,r(e)),s()},s)})}},{key:"createIterator",value:function(e,t,n){return document.createNodeIterator(e,t,n,!1)}},{key:"createInstanceOnIframe",value:function(e){return new l(e.querySelector("html"),this.iframes)}},{key:"compareNodeIframe",value:function(e,t,n){if(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_PRECEDING){if(null===t)return!0;if(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_FOLLOWING)return!0}return!1}},{key:"getIteratorNode",value:function(e){var t=e.previousNode();return{prevNode:t,node:null===t?e.nextNode():e.nextNode()&&e.nextNode()}}},{key:"checkIframeFilter",value:function(e,t,n,r){var o=!1,i=!1;return r.forEach(function(e,t){e.val===n&&(o=t,i=e.handled)}),this.compareNodeIframe(e,t,n)?(!1!==o||i?!1===o||i||(r[o].handled=!0):r.push({val:n,handled:!0}),!0):(!1===o&&r.push({val:n,handled:!1}),!1)}},{key:"handleOpenIframes",value:function(e,t,n,r){var o=this;e.forEach(function(e){e.handled||o.getIframeContents(e.val,function(e){o.createInstanceOnIframe(e).forEachNode(t,n,r)})})}},{key:"iterateThroughNodes",value:function(t,e,n,r,o){for(var i,a=this,c=this.createIterator(e,t,r),s=[],l=[],u=void 0,d=void 0;void 0,i=a.getIteratorNode(c),d=i.prevNode,u=i.node;)this.iframes&&this.forEachIframe(e,function(e){return a.checkIframeFilter(u,d,e,s)},function(e){a.createInstanceOnIframe(e).forEachNode(t,function(e){return l.push(e)},r)}),l.push(u);l.forEach(function(e){n(e)}),this.iframes&&this.handleOpenIframes(s,t,n,r),o()}},{key:"forEachNode",value:function(n,r,o){var i=this,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){},e=this.getContexts(),c=e.length;c||a(),e.forEach(function(e){var t=function(){i.iterateThroughNodes(n,e,r,o,function(){--c<=0&&a()})};i.iframes?i.waitForIframes(e,t):t()})}}],[{key:"matches",value:function(t,e){var n="string"==typeof e?[e]:e,r=t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;if(r){var o=!1;return n.every(function(e){return!r.call(t,e)||!(o=!0)}),o}return!1}}]),l}(),a=function(){function n(e){o(this,n),this.ctx=e,this.ie=!1;var t=window.navigator.userAgent;(-1<t.indexOf("MSIE")||-1<t.indexOf("Trident"))&&(this.ie=!0)}return e(n,[{key:"log",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"debug",n=this.opt.log;this.opt.debug&&"object"===(void 0===n?"undefined":r(n))&&"function"==typeof n[t]&&n[t]("mark.js: "+e)}},{key:"escapeStr",value:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createRegExp",value:function(e){return"disabled"!==this.opt.wildcards&&(e=this.setupWildcardsRegExp(e)),e=this.escapeStr(e),Object.keys(this.opt.synonyms).length&&(e=this.createSynonymsRegExp(e)),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.setupIgnoreJoinersRegExp(e)),this.opt.diacritics&&(e=this.createDiacriticsRegExp(e)),e=this.createMergedBlanksRegExp(e),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.createJoinersRegExp(e)),"disabled"!==this.opt.wildcards&&(e=this.createWildcardsRegExp(e)),e=this.createAccuracyRegExp(e)}},{key:"createSynonymsRegExp",value:function(e){var t=this.opt.synonyms,n=this.opt.caseSensitive?"":"i",r=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\0":"";for(var o in t)if(t.hasOwnProperty(o)){var i=t[o],a="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(o):this.escapeStr(o),c="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(i):this.escapeStr(i);""!==a&&""!==c&&(e=e.replace(new RegExp("("+this.escapeStr(a)+"|"+this.escapeStr(c)+")","gm"+n),r+"("+this.processSynomyms(a)+"|"+this.processSynomyms(c)+")"+r))}return e}},{key:"processSynomyms",value:function(e){return(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.setupIgnoreJoinersRegExp(e)),e}},{key:"setupWildcardsRegExp",value:function(e){return(e=e.replace(/(?:\\)*\?/g,function(e){return"\\"===e.charAt(0)?"?":""})).replace(/(?:\\)*\*/g,function(e){return"\\"===e.charAt(0)?"*":""})}},{key:"createWildcardsRegExp",value:function(e){var t="withSpaces"===this.opt.wildcards;return e.replace(/\u0001/g,t?"[\\S\\s]?":"\\S?").replace(/\u0002/g,t?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function(e){return e.replace(/[^(|)\\]/g,function(e,t,n){var r=n.charAt(t+1);return/[(|)\\]/.test(r)||""===r?e:e+"\0"})}},{key:"createJoinersRegExp",value:function(e){var t=[],n=this.opt.ignorePunctuation;return Array.isArray(n)&&n.length&&t.push(this.escapeStr(n.join(""))),this.opt.ignoreJoiners&&t.push("\\u00ad\\u200b\\u200c\\u200d"),t.length?e.split(/\u0000+/).join("["+t.join("")+"]*"):e}},{key:"createDiacriticsRegExp",value:function(n){var r=this.opt.caseSensitive?"":"i",e=this.opt.caseSensitive?["aàáảãạăằắẳẵặâầấẩẫậäåāą","AÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćč","CÇĆČ","dđď","DĐĎ","eèéẻẽẹêềếểễệëěēę","EÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïī","IÌÍỈĨỊÎÏĪ","lł","LŁ","nñňń","NÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøō","OÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rř","RŘ","sšśșş","SŠŚȘŞ","tťțţ","TŤȚŢ","uùúủũụưừứửữựûüůū","UÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿ","YÝỲỶỸỴŸ","zžżź","ZŽŻŹ"]:["aàáảãạăằắẳẵặâầấẩẫậäåāąAÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćčCÇĆČ","dđďDĐĎ","eèéẻẽẹêềếểễệëěēęEÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïīIÌÍỈĨỊÎÏĪ","lłLŁ","nñňńNÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøōOÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rřRŘ","sšśșşSŠŚȘŞ","tťțţTŤȚŢ","uùúủũụưừứửữựûüůūUÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿYÝỲỶỸỴŸ","zžżźZŽŻŹ"],o=[];return n.split("").forEach(function(t){e.every(function(e){if(-1!==e.indexOf(t)){if(-1<o.indexOf(e))return!1;n=n.replace(new RegExp("["+e+"]","gm"+r),"["+e+"]"),o.push(e)}return!0})}),n}},{key:"createMergedBlanksRegExp",value:function(e){return e.replace(/[\s]+/gim,"[\\s]+")}},{key:"createAccuracyRegExp",value:function(e){var t=this,n=this.opt.accuracy,r="string"==typeof n?n:n.value,o="string"==typeof n?[]:n.limiters,i="";switch(o.forEach(function(e){i+="|"+t.escapeStr(e)}),r){case"partially":default:return"()("+e+")";case"complementary":return"()([^"+(i="\\s"+(i||this.escapeStr("!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~¡¿")))+"]*"+e+"[^"+i+"]*)";case"exactly":return"(^|\\s"+i+")("+e+")(?=$|\\s"+i+")"}}},{key:"getSeparatedKeywords",value:function(e){var t=this,n=[];return e.forEach(function(e){t.opt.separateWordSearch?e.split(" ").forEach(function(e){e.trim()&&-1===n.indexOf(e)&&n.push(e)}):e.trim()&&-1===n.indexOf(e)&&n.push(e)}),{keywords:n.sort(function(e,t){return t.length-e.length}),length:n.length}}},{key:"isNumeric",value:function(e){return Number(parseFloat(e))==e}},{key:"checkRanges",value:function(e){var o=this;if(!Array.isArray(e)||"[object Object]"!==Object.prototype.toString.call(e[0]))return this.log("markRanges() will only accept an array of objects"),this.opt.noMatch(e),[];var i=[],a=0;return e.sort(function(e,t){return e.start-t.start}).forEach(function(e){var t=o.callNoMatchOnInvalidRanges(e,a),n=t.start,r=t.end;t.valid&&(e.start=n,e.length=r-n,i.push(e),a=r)}),i}},{key:"callNoMatchOnInvalidRanges",value:function(e,t){var n=void 0,r=void 0,o=!1;return e&&void 0!==e.start?(r=(n=parseInt(e.start,10))+parseInt(e.length,10),this.isNumeric(e.start)&&this.isNumeric(e.length)&&0<r-t&&0<r-n?o=!0:(this.log("Ignoring invalid or overlapping range: "+JSON.stringify(e)),this.opt.noMatch(e))):(this.log("Ignoring invalid range: "+JSON.stringify(e)),this.opt.noMatch(e)),{start:n,end:r,valid:o}}},{key:"checkWhitespaceRanges",value:function(e,t,n){var r=void 0,o=!0,i=n.length,a=t-i,c=parseInt(e.start,10)-a;return i<(r=(c=i<c?i:c)+parseInt(e.length,10))&&(r=i,this.log("End range automatically set to the max value of "+i)),c<0||r-c<0||i<c||i<r?(o=!1,this.log("Invalid range: "+JSON.stringify(e)),this.opt.noMatch(e)):""===n.substring(c,r).replace(/\s+/g,"")&&(o=!1,this.log("Skipping whitespace only range: "+JSON.stringify(e)),this.opt.noMatch(e)),{start:c,end:r,valid:o}}},{key:"getTextNodes",value:function(e){var t=this,n="",r=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,function(e){r.push({start:n.length,end:(n+=e.textContent).length,node:e})},function(e){return t.matchesExclude(e.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},function(){e({value:n,nodes:r})})}},{key:"matchesExclude",value:function(e){return i.matches(e,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function(e,t,n){var r=this.opt.element?this.opt.element:"mark",o=e.splitText(t),i=o.splitText(n-t),a=document.createElement(r);return a.setAttribute("data-markjs","true"),this.opt.className&&a.setAttribute("class",this.opt.className),a.textContent=o.textContent,o.parentNode.replaceChild(a,o),i}},{key:"wrapRangeInMappedTextNode",value:function(c,s,l,u,d){var f=this;c.nodes.every(function(e,n){var t=c.nodes[n+1];if(void 0===t||t.start>s){if(!u(e.node))return!1;var r=s-e.start,o=(l>e.end?e.end:l)-e.start,i=c.value.substr(0,e.start),a=c.value.substr(o+e.start);if(e.node=f.wrapRangeInTextNode(e.node,r,o),c.value=i+a,c.nodes.forEach(function(e,t){n<=t&&(0<c.nodes[t].start&&t!==n&&(c.nodes[t].start-=o),c.nodes[t].end-=o)}),l-=o,d(e.node.previousSibling,e.start),!(l>e.end))return!1;s=e.end}return!0})}},{key:"wrapMatches",value:function(o,e,i,a,t){var c=this,s=0===e?0:e+1;this.getTextNodes(function(e){e.nodes.forEach(function(e){e=e.node;for(var t=void 0;null!==(t=o.exec(e.textContent))&&""!==t[s];)if(i(t[s],e)){var n=t.index;if(0!==s)for(var r=1;r<s;r++)n+=t[r].length;e=c.wrapRangeInTextNode(e,n,n+t[s].length),a(e.previousSibling),o.lastIndex=0}}),t()})}},{key:"wrapMatchesAcrossElements",value:function(i,e,a,c,s){var l=this,u=0===e?0:e+1;this.getTextNodes(function(e){for(var t=void 0;null!==(t=i.exec(e.value))&&""!==t[u];){var n=t.index;if(0!==u)for(var r=1;r<u;r++)n+=t[r].length;var o=n+t[u].length;l.wrapRangeInMappedTextNode(e,n,o,function(e){return a(t[u],e)},function(e,t){i.lastIndex=t,c(e)})}s()})}},{key:"wrapRangeFromIndex",value:function(e,c,s,t){var l=this;this.getTextNodes(function(i){var a=i.value.length;e.forEach(function(t,n){var e=l.checkWhitespaceRanges(t,a,i.value),r=e.start,o=e.end;e.valid&&l.wrapRangeInMappedTextNode(i,r,o,function(e){return c(e,t,i.value.substring(r,o),n)},function(e){s(e,t)})}),t()})}},{key:"unwrapMatches",value:function(e){for(var t=e.parentNode,n=document.createDocumentFragment();e.firstChild;)n.appendChild(e.removeChild(e.firstChild));t.replaceChild(n,e),this.ie?this.normalizeTextNode(t):t.normalize()}},{key:"normalizeTextNode",value:function(e){if(e){if(3===e.nodeType)for(;e.nextSibling&&3===e.nextSibling.nodeType;)e.nodeValue+=e.nextSibling.nodeValue,e.parentNode.removeChild(e.nextSibling);else this.normalizeTextNode(e.firstChild);this.normalizeTextNode(e.nextSibling)}}},{key:"markRegExp",value:function(e,t){var n=this;this.opt=t,this.log('Searching with expression "'+e+'"');var r=0,o="wrapMatches";this.opt.acrossElements&&(o="wrapMatchesAcrossElements"),this[o](e,this.opt.ignoreGroups,function(e,t){return n.opt.filter(t,e,r)},function(e){r++,n.opt.each(e)},function(){0===r&&n.opt.noMatch(e),n.opt.done(r)})}},{key:"mark",value:function(e,t){var o=this;this.opt=t;var i=0,a="wrapMatches",n=this.getSeparatedKeywords("string"==typeof e?[e]:e),c=n.keywords,s=n.length,l=this.opt.caseSensitive?"":"i";this.opt.acrossElements&&(a="wrapMatchesAcrossElements"),0===s?this.opt.done(i):function e(n){var t=new RegExp(o.createRegExp(n),"gm"+l),r=0;o.log('Searching with expression "'+t+'"'),o[a](t,1,function(e,t){return o.opt.filter(t,n,i,r)},function(e){r++,i++,o.opt.each(e)},function(){0===r&&o.opt.noMatch(n),c[s-1]===n?o.opt.done(i):e(c[c.indexOf(n)+1])})}(c[0])}},{key:"markRanges",value:function(e,t){var o=this;this.opt=t;var n=0,r=this.checkRanges(e);r&&r.length?(this.log("Starting to mark with the following ranges: "+JSON.stringify(r)),this.wrapRangeFromIndex(r,function(e,t,n,r){return o.opt.filter(e,t,n,r)},function(e,t){n++,o.opt.each(e,t)},function(){o.opt.done(n)})):this.opt.done(n)}},{key:"unmark",value:function(e){var r=this;this.opt=e;var o=this.opt.element?this.opt.element:"*";o+="[data-markjs]",this.opt.className&&(o+="."+this.opt.className),this.log('Removal selector "'+o+'"'),this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,function(e){r.unwrapMatches(e)},function(e){var t=i.matches(e,o),n=r.matchesExclude(e);return!t||n?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},this.opt.done)}},{key:"opt",set:function(e){this._opt=t({},{element:"",className:"",exclude:[],iframes:!1,iframesTimeout:5e3,separateWordSearch:!0,diacritics:!0,synonyms:{},accuracy:"partially",acrossElements:!1,caseSensitive:!1,ignoreJoiners:!1,ignoreGroups:0,ignorePunctuation:[],wildcards:"disabled",each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:window.console},e)},get:function(){return this._opt}},{key:"iterator",get:function(){return new i(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]),n}();return function(e){var n=this,r=new a(e);return this.mark=function(e,t){return r.mark(e,t),n},this.markRegExp=function(e,t){return r.markRegExp(e,t),n},this.markRanges=function(e,t){return r.markRanges(e,t),n},this.unmark=function(e){return r.unmark(e),n},this}});